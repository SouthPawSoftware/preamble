<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <title>Preamble by jeffschwartz</title>
  </head>

  <body>
    <div id="container">
      <div class="inner">

        <header>
          <h1>Preamble</h1>
          <h2>A Powerful JavaScript Unit Testing Framework</h2>
        </header>

        <section id="downloads" class="clearfix">
          <a href="https://github.com/jeffschwartz/preamble/zipball/master" id="download-zip" class="button"><span>Download .zip</span></a>
          <a href="https://github.com/jeffschwartz/preamble/tarball/master" id="download-tar-gz" class="button"><span>Download .tar.gz</span></a>
          <a href="https://github.com/jeffschwartz/preamble" id="view-on-github" class="button"><span>View on GitHub</span></a>
        </section>

        <hr>

        <section id="main_content">
          <h3>
<a name="introducing-preamble" class="anchor" href="#introducing-preamble"><span class="octicon octicon-link"></span></a>Introducing Preamble</h3>

<p>Preamble is a powerful JavaScript unit testing framework that runs in any modern HTML5 compliant browser. Preamble is backed by a very powerful assertion engine that your tests interface with through a very simple to use but powerful API, which makes authoring tests very easy and intuitive.
Here, for example, you can see how easy it is to write a synchronous test:</p>

<div class="highlight highlight-javascript"><pre>    <span class="nx">Preamble</span><span class="p">.</span><span class="nx">group</span><span class="p">(</span><span class="s1">'truthy'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
        <span class="nx">Preamble</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="s1">'true === true'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">assert</span><span class="p">){</span>
            <span class="nx">assert</span><span class="p">.</span><span class="nx">isTrue</span><span class="p">(</span><span class="kc">true</span> <span class="o">===</span> <span class="kc">true</span><span class="p">,</span> <span class="s1">'true === true'</span><span class="p">);</span>
        <span class="p">});</span>
    <span class="p">});</span>
</pre></div>

<p>And as the following example demonstrates, writing asynchronous tests is just as easy:</p>

<div class="highlight highlight-javascript"><pre>    <span class="nx">Preamble</span><span class="p">.</span><span class="nx">group</span><span class="p">(</span><span class="s1">'asynchronous'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
        <span class="nx">Preamble</span><span class="p">.</span><span class="nx">asyncTest</span><span class="p">(</span><span class="s1">'fetch data from database via Ajaax'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">assert</span><span class="p">){</span>
            <span class="kd">var</span> <span class="nx">catsCollection</span><span class="p">;</span>
            <span class="kd">var</span> <span class="nx">promise</span> <span class="o">=</span> <span class="nx">db</span><span class="p">.</span><span class="nx">catscollection</span><span class="p">.</span><span class="nx">fetch</span><span class="p">();</span>
            <span class="nx">promise</span><span class="p">.</span><span class="nx">done</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">collection</span><span class="p">){</span>
                <span class="nx">catsCollection</span> <span class="o">=</span> <span class="nx">collection</span><span class="p">;</span>
            <span class="p">});</span>      
            <span class="nx">Preamble</span><span class="p">.</span><span class="nx">whenAsyncStopped</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
                <span class="nx">assert</span><span class="p">.</span><span class="nx">isTrue</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">catsCollection</span> <span class="o">!==</span> <span class="s1">'undefined'</span><span class="p">,</span> <span class="s1">'promise.done was called and the cat collection was fetched'</span><span class="p">);</span>
            <span class="p">});</span>
        <span class="p">});</span>
    <span class="p">});</span>
</pre></div>

<h3>
<a name="getting-started-with-preamble" class="anchor" href="#getting-started-with-preamble"><span class="octicon octicon-link"></span></a>Getting started with Preamble</h3>

<p>Getting started with Preamble is as easy as cloning the repo, changing to the directory in which the repo was cloned into, adding your test script or scripts to the index.html page and running index.html in your browser.</p>

<div class="highlight highlight-html"><pre><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html</span> <span class="na">lang=</span><span class="s">"en"</span><span class="nt">&gt;</span>
<span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;title&gt;</span>Preamble<span class="nt">&lt;/title&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">"viewport"</span> <span class="na">content=</span><span class="s">"width=device-width, initial-scale=1.0"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">'http://fonts.googleapis.com/css?family=Lora'</span> <span class="na">rel=</span><span class="s">'stylesheet'</span> <span class="na">type=</span><span class="s">'text/css'</span><span class="nt">&gt;</span>
    <span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">'style/preamble.css'</span> <span class="na">rel=</span><span class="s">'stylesheet'</span> <span class="na">type=</span><span class="s">'text/css'</span><span class="nt">&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;header&gt;</span>
        <span class="nt">&lt;h1</span> <span class="na">id=</span><span class="s">"header"</span><span class="nt">&gt;</span>Name your tests here<span class="nt">&lt;/h1&gt;</span>
    <span class="nt">&lt;/header&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"container"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;section</span> <span class="na">id=</span><span class="s">"status-container"</span><span class="nt">&gt;</span> <span class="nt">&lt;/section&gt;</span>
        <span class="nt">&lt;section</span> <span class="na">id=</span><span class="s">"results-container"</span><span class="nt">&gt;&lt;/section&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"test-container"</span><span class="nt">&gt;&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>

    <span class="c">&lt;!-- JavaScripts Go Here --&gt;</span>

    <span class="c">&lt;!-- code and libraries needed to run tests go here --&gt;</span>

    <span class="c">&lt;!-- preamble-config.js file has to be loaded before preamble.js is loaded!!! --&gt;</span>
    <span class="c">&lt;!--</span>
<span class="c">    &lt;script src="javascripts/preamble-config.js"&gt;&lt;/script&gt;</span>
<span class="c">    --&gt;</span>

    <span class="c">&lt;!-- preamble.js --&gt;</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"javascripts/libs/preamble.js"</span><span class="nt">&gt;&lt;/script&gt;</span>

    <span class="c">&lt;!-- test scripts follow preamble.js --&gt;</span>
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div>

<h1>
<a name="api" class="anchor" href="#api"><span class="octicon octicon-link"></span></a>API</h1>

<h3>
<a name="grouplabel-callback" class="anchor" href="#grouplabel-callback"><span class="octicon octicon-link"></span></a>group(label, callback)</h3>

<p>group is used to group together one or more tests. <strong>label</strong> is a string used to uniquely identify the group and <strong>callback</strong> is a function which contains one or more tests. Besides containing tests, <strong>callback</strong> can also provide closure so that any code or values that are defined within the callback function are also in the tests' scope.</p>

<div class="highlight highlight-javascript"><pre>    <span class="nx">Preamble</span><span class="p">.</span><span class="nx">group</span><span class="p">(</span><span class="s1">'A group providing closure'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
        <span class="kd">var</span> <span class="nx">one</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">two</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span><span class="k">return</span> <span class="mi">2</span><span class="p">;};</span>
        <span class="nx">Preamble</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="s1">'Test #1'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">assert</span><span class="p">){</span>
            <span class="nx">assert</span><span class="p">.</span><span class="nx">isTrue</span><span class="p">(</span><span class="nx">one</span> <span class="o">===</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">'one does equal 1'</span><span class="p">);</span>
        <span class="p">});</span>
        <span class="nx">Preamble</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="s1">'Test #2'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">assert</span><span class="p">){</span>
            <span class="nx">assert</span><span class="p">.</span><span class="nx">isTrue</span><span class="p">(</span><span class="nx">two</span><span class="p">()</span> <span class="o">===</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">'two() does equal 2'</span><span class="p">);</span>
        <span class="p">});</span>
    <span class="p">});</span>
</pre></div>

<h3>
<a name="beforeeachtestcallback" class="anchor" href="#beforeeachtestcallback"><span class="octicon octicon-link"></span></a>beforeEachTest(callback)</h3>

<h3>
<a name="testlabel-callback" class="anchor" href="#testlabel-callback"><span class="octicon octicon-link"></span></a>test(label, callback)</h3>

<p>test is used to group together one or more assertions that are to be run synchronously. <strong>label</strong> is a string used to uniquely identify a test within a group and <strong>callback</strong> is a function which contains one or more assertions. Besides containing assertions, <strong>callback</strong> can also provide closure so that any code or values that are defined within the callback function are also in the assertions' scope.</p>

<div class="highlight highlight-javascript"><pre>    <span class="nx">Preamble</span><span class="p">.</span><span class="nx">group</span><span class="p">(</span><span class="s1">'2 tests providing closure'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
        <span class="nx">Preamble</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="s1">'Test #1'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">assert</span><span class="p">){</span>
            <span class="kd">var</span> <span class="nx">one</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>        
            <span class="nx">assert</span><span class="p">.</span><span class="nx">isTrue</span><span class="p">(</span><span class="nx">one</span> <span class="o">===</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">'one does equal 1'</span><span class="p">);</span>
        <span class="p">});</span>
        <span class="nx">Preamble</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="s1">'Test #2'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">assert</span><span class="p">){</span>
            <span class="kd">var</span> <span class="nx">two</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span><span class="k">return</span> <span class="mi">2</span><span class="p">;};</span>
            <span class="nx">assert</span><span class="p">.</span><span class="nx">isTrue</span><span class="p">(</span><span class="nx">two</span><span class="p">()</span> <span class="o">===</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">'two() does equal 2'</span><span class="p">);</span>
        <span class="p">});</span>
    <span class="p">});</span>
</pre></div>

<h3>
<a name="aftereachtestcallback" class="anchor" href="#aftereachtestcallback"><span class="octicon octicon-link"></span></a>afterEachTest(callback)</h3>

<h3>
<a name="asyncbeforeeachtestcallback" class="anchor" href="#asyncbeforeeachtestcallback"><span class="octicon octicon-link"></span></a>asyncBeforeEachTest(callback)</h3>

<h3>
<a name="asynctestlabel-interval-callback" class="anchor" href="#asynctestlabel-interval-callback"><span class="octicon octicon-link"></span></a>asyncTest(label, [interval,] callback)</h3>

<p>asyncTest is used to group together one or more assertions that are to be run asynchronously. <strong>label</strong> is a string used to uniquely identify a test within a group. <strong>interval</strong> is optional and is an integer value that can be used to override the default interval for asynchronous tests. <strong>callback</strong> is a function which contains one or more assertions. Besides containing assertions, <strong>callback</strong> can also provide closure so that any code or values that are defined within the callback function are also in the assertions' scope. You must call <strong>whenAsyncStopped</strong> (see immediately below) to register a callback that is to be called when the asyncTest's interval has expired. </p>

<div class="highlight highlight-javascript"><pre>    <span class="nx">Preamble</span><span class="p">.</span><span class="nx">group</span><span class="p">(</span><span class="s1">'asynchronous'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
        <span class="nx">Preamble</span><span class="p">.</span><span class="nx">asyncTest</span><span class="p">(</span><span class="s1">'fetch data from database via Ajaax'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">assert</span><span class="p">){</span>
            <span class="kd">var</span> <span class="nx">catsCollection</span><span class="p">;</span>
            <span class="kd">var</span> <span class="nx">promise</span> <span class="o">=</span> <span class="nx">db</span><span class="p">.</span><span class="nx">catscollection</span><span class="p">.</span><span class="nx">fetch</span><span class="p">();</span>
            <span class="nx">promise</span><span class="p">.</span><span class="nx">done</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">collection</span><span class="p">){</span>
                <span class="nx">catsCollection</span> <span class="o">=</span> <span class="nx">collection</span><span class="p">;</span>
            <span class="p">});</span>      
            <span class="nx">Preamble</span><span class="p">.</span><span class="nx">whenAsyncStopped</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
                <span class="nx">assert</span><span class="p">.</span><span class="nx">isTrue</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">catsCollection</span> <span class="o">!==</span> <span class="s1">'undefined'</span><span class="p">,</span> <span class="s1">'promise.done was called and the cat collection was fetched'</span><span class="p">);</span>
            <span class="p">});</span>
        <span class="p">});</span>
    <span class="p">});</span>
</pre></div>

<h3>
<a name="whenasyncstoppedcallback" class="anchor" href="#whenasyncstoppedcallback"><span class="octicon octicon-link"></span></a>whenAsyncStopped(callback)</h3>

<p>whenAsyncStopped is used inside of an asyncTest to register a <strong>callback</strong> that wll be called to run one or more assertions when an asyncTest's interval has expired.</p>

<h3>
<a name="asyncaftereachtestcallback" class="anchor" href="#asyncaftereachtestcallback"><span class="octicon octicon-link"></span></a>asyncAfterEachTest(callback)</h3>
        </section>

        <footer>
          Preamble is maintained by <a href="https://github.com/jeffschwartz">jeffschwartz</a><br>
          This page was generated by <a href="http://pages.github.com">GitHub Pages</a>. Tactile theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.
        </footer>

        
      </div>
    </div>
  </body>
</html>